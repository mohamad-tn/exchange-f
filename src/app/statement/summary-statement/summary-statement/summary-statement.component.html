<div id="t2" class="p-4" #screen>
<div class="row">
    <div class="col-md-12">
        <nb-card class="as-case-card">
            <nb-card-header>
                <div class="as-head">
                    <div class="header-container">
                        <nb-actions>
                            <nb-action id="swap" class="control-item" icon="swap-outline"></nb-action>
                            <nb-action class="control-item ">
                                <h5>الخلاصة</h5> 
                            </nb-action>
                            <nb-action id="toDate" class="control-item " style="display: none;">
                                <h6>الى تاريخ : {{date}}</h6>
                            </nb-action>
                        </nb-actions>
                    </div>
                    <div class="header-container"></div>
                    <div id="buttons" class="header-container">
                        <nb-actions class="float">
                            <nb-action class="control-item" (click)="showSearchDialog()"><i class="fa fa-binoculars as-icon-primary" aria-hidden="true"></i></nb-action>
                            <nb-action class="control-item" (click)="downloadImage()">
                                <nb-icon icon="printer-outline"></nb-icon>
                                <nb-action class="control-item" icon="corner-up-left-outline"
                                    routerLink="/app/home"></nb-action>
                            </nb-action>
                        </nb-actions>
                    </div>
                </div>
            </nb-card-header>
            <nb-card-body class="as-case-card-body">
                <div class="v-row">
                    <div class="v-row-cell" [style.width]="cellWidth">
                        <h6></h6>
                    </div>
                    <div class="v-row-cell" [style.width]="cellWidth" *ngFor="let item of clientResult">
                        <span class="v-text-primary">{{item.currency?.name}}</span>
                    </div>
                </div>
                <hr />
                
                <div class="v-row">
                    <div class="v-row-cell" [style.width]="cellWidth">
                        <span class="v-text-primary">صافي ديون الشركات</span>
                    </div>
                    <div class="v-row-cell" [style.width]="cellWidth" *ngFor="let item of companyResult">
                        <span class="v-text">{{getBalanceWithComma(item.totalBalance)}}</span>
                    </div>
                </div>
                <hr />
                <div class="v-row">
                    <div class="v-row-cell" [style.width]="cellWidth">
                        <span class="v-text-primary">صافي ديون العملاء</span>
                    </div>
                    <div class="v-row-cell" [style.width]="cellWidth" *ngFor="let item of clientResult">
                        <span class="v-text">{{getBalanceWithComma(item.totalBalance)}}</span>
                    </div>
                </div>
                <hr />
                <div class="v-row">
                    <div class="v-row-cell" [style.width]="cellWidth">
                        <span class="v-text-primary">الصندوق الفعلي</span>
                    </div>
                    <div class="v-row-cell" [style.width]="cellWidth" *ngFor="let item of treasuryResult">
                        <span class="v-text">{{getBalanceWithComma(item.totalBalance)}}</span>
                    </div>
                </div>
                <hr />
                <div class="v-row">
                    <div class="v-row-cell" [style.width]="cellWidth">
                        <span class="v-text-primary">المستفيدين غير المستلمين</span>
                    </div>
                    <div class="v-row-cell" [style.width]="cellWidth" *ngFor="let item of noneReseivedResult">
                        <span class="v-text">{{getBalanceWithComma(item.totalBalance)}}</span>
                    </div>
                </div>
                <hr />
                <div class="v-row">
                    <div class="v-row-cell" [style.width]="cellWidth">
                        <span class="v-text-primary"> المجموع</span>
                    </div>
                    <div class="v-row-cell" [style.width]="cellWidth" *ngFor="let item of clientResult">
                        <span class="success-text">{{calculatTotal(item.currency?.id)}}</span>
                    </div>
                </div>
                <hr />
                <div class="v-row" *ngIf="loading">
                    <div class="v-row-cell" [style.width]="cellWidth">
                        <span class="v-text-primary">المبلغ النهائي (دولار)</span>
                    </div>
                    <div class="v-row-cell" [style.width]="cellWidth">
                        <span class="success-text">{{getBalanceWithComma(totalAmount)}}</span>
                    </div>
                </div>
            </nb-card-body>
        </nb-card>
    
    </div>
</div>
</div>

<div id="download">
    <span #canvas></span>
    <a #downloadLink></a>
</div>


